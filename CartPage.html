<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cart | Lumina</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Header -->
<header>
    <nav>
        <div class="logo">
            <a href="HomePage.html"><img src="images/logo.png" alt="Lumina Logo"></a>
        </div>
        <div class="categories-head">
            <a href="Electronics.html">Electronics</a>
            <a href="Makeup.html">Make-up</a>
            <a href="Decor.html">Decor</a>
        </div>
        <div class="header-icons">
            <a href="CustomerPage.html" class="oval-button">Customer</a>
            <a href="SellerPage.html" class="oval-button">Seller</a>
            <a href="HomePage.html"><img src="images/home.png" class="icon" alt="Home"></a>
            <a href="CartPage.html" id="cart-icon"><img src="images/cart.png" class="icon" alt="Cart"></a>
        </div>
    </nav>
    
    <div class="breadcrumbs">
        <a href="HomePage.html">Home</a> &gt; <a href="CustomerPage.html">Customer</a> &gt; <a class="thisPage" href="CartPage.html">Cart</a>
    </div>
</header>

<main class="cart">
    <h1>In Your Cart</h1>
    <form action="acknowledgement.html" method="POST" class="cart-form">
        <fieldset>
            <legend class="hide-label">Select items in your cart</legend>
            <section class="cart-edit">
                <!-- Cart Items will be dynamically loaded here -->
                <ul class="cart-items" id="cart-items">
                    <!-- Cart items will be inserted here dynamically by JavaScript -->
                </ul>
                
                <!-- Cart Actions -->
                <div class="cart-actions">
                    <label for="selectAll-btn" class="hide-label"> Select all</label>
                    <input type="button" value="Select All" id="selectAll-btn">
                    <label for="removeAll-btn" class="hide-label"> Remove all </label>
                    <input type="reset" value="Remove All" id="removeAll-btn">
                </div>
            </section>
        </fieldset>

        <!-- Summary Section -->
        <aside class="summary">
            <h2>Summary</h2> 
            <div class="summary-details">
                <p>Sub Total: <span id="sub-total">$0.00</span></p>
                <p>Delivery Fee: $20.00</p> 
                <hr>
                <p><strong>Total: <span id="total">$0.00</span></strong></p>
            </div>
            <input type="submit" value="Checkout" class="checkout">
        </aside>
    </form>
</main>

<!-- Footer -->
<footer>
    <div class="contact-info">
        <p>Contact Us</p>
        <p><img src="images/instagram.png" alt="Instagram">@Lumina</p>
        <p><img src="images/x.png" alt="X">@Lumina</p>
    </div>
    <div class="copyright">
        <p>&copy; 2024 IT312</p>
    </div>
</footer>
<script>
// Retrieve cart data from localStorage
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// Function to update the cart display
function updateCartDisplay() {
    const cartItemsContainer = document.getElementById('cart-items');
    let total = 0;  // Total price

    // Clear any existing items
    cartItemsContainer.innerHTML = '';

    // Loop through each item in the cart and create HTML for it
    cart.forEach(item => {
        const li = document.createElement('li');
        li.classList.add('cart-item');

        // Calculate the total price
        total += item.price * item.quantity;

        // Create item HTML structure
        li.innerHTML = `
            <label class="hide-label" for="${item.id}">Select ${item.name}</label>
            <input type="checkbox" id="${item.id}" checked>
            <!-- Dynamically add the image -->
            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
            <div class="item-info">
                <h2>${item.name}</h2>
                <!-- Dynamically add the description -->
                <p>${item.description}</p>
            </div>
            <div class="quantity">
                <label class="hide-label" for="quantity-${item.id}">Quantity</label>
                <input type="number" id="quantity-${item.id}" value="${item.quantity}" min="1">
            </div>
            <div class="price">$${(item.price * item.quantity).toFixed(2)}</div>
            <button class="remove-item" type="button" onclick="removeFromCart('${item.id}')">X</button>
        `;

        // Append item to the cart
        cartItemsContainer.appendChild(li);
    });

    // Update the summary
    document.getElementById('sub-total').innerText = `$${total.toFixed(2)}`;
    document.getElementById('total').innerText = `$${(total + 20).toFixed(2)}`;  // Adding the delivery fee
}

// Function to remove an item from the cart
function removeFromCart(itemId) {
    // Remove item from the cart array
    cart = cart.filter(item => item.id !== itemId);

    // Save the updated cart to localStorage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Update the cart display
    updateCartDisplay();
}

// Initial call to update the cart display when the page loads
updateCartDisplay();


</script>

</body>
</html>

